<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="BlueRobot QuadAlign X 관리자 프로그램 - 로그인">
    <meta name="keywords" content="BlueRobot, QuadAlign X, 관리자, 로그인, 대시보드">
    <meta name="robots" content="noindex, nofollow">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../assets/logo/Bluerobot_CI.svg">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
    
    <title>로그인 - BlueRobot QuadAlign X 관리자</title>
</head>
<body>
    <!-- 로그인 컨테이너 -->
    <div class="auth-container">
        <div class="auth-card">
            <!-- 헤더 -->
            <div class="auth-header">
                <img src="../assets/logo/Bluerobot_CI.svg" alt="BlueRobot" class="auth-logo">
                <h1 class="auth-title">관리자 로그인</h1>
                <p class="auth-subtitle">
                    QuadAlign X 관리자 프로그램에 오신 것을 환영합니다.<br>
                    계정 정보를 입력하여 로그인하세요.
                </p>
            </div>
            
            <!-- 로그인 폼 -->
            <form id="loginForm" class="auth-form" novalidate>
                <!-- 이메일 -->
                <div class="form-group">
                    <label for="email" class="form-label">이메일 주소</label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        class="form-input" 
                        placeholder="admin@bluerobot.co.kr"
                        autocomplete="email"
                        required
                    >
                </div>
                
                <!-- 비밀번호 -->
                <div class="form-group">
                    <label for="password" class="form-label">비밀번호</label>
                    <div style="position: relative;">
                        <input 
                            type="password" 
                            id="password" 
                            name="password" 
                            class="form-input" 
                            placeholder="비밀번호를 입력하세요"
                            autocomplete="current-password"
                            required
                        >
                        <button 
                            type="button" 
                            class="password-toggle"
                            style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); border: none; background: none; cursor: pointer; color: var(--text-tertiary);"
                            aria-label="비밀번호 보기/숨기기"
                        >
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Remember Me & 옵션 -->
                <div class="form-checkbox-group">
                    <input type="checkbox" id="rememberMe" name="rememberMe" class="form-checkbox" checked>
                    <label for="rememberMe" class="form-checkbox-label">로그인 상태 유지 (30일)</label>
                </div>
                
                <!-- 오류 메시지 -->
                <div id="loginError" class="form-error" style="display: none;">
                    <!-- 오류 메시지가 여기 표시됩니다 -->
                </div>
                
                <!-- 로그인 버튼 -->
                <div class="auth-actions">
                    <button type="submit" id="loginButton" class="btn btn-primary btn-auth">
                        <i class="fas fa-sign-in-alt"></i>
                        로그인
                    </button>
                </div>
                
                <!-- 비밀번호 찾기 -->
                <div class="forgot-password">
                    <a href="#" onclick="showForgotPasswordModal(); return false;">
                        비밀번호를 잊으셨나요?
                    </a>
                </div>
            </form>
            
            <!-- 구분선 -->
            <div class="auth-divider">
                <span>또는</span>
            </div>
            
            <!-- 테스트 계정 정보 -->
            <div class="test-accounts" style="background: var(--bg-secondary); padding: var(--spacing-sm); border-radius: var(--radius-md); margin-top: var(--spacing-sm);">
                <h4 style="font-size: 0.875rem; margin-bottom: var(--spacing-xs); color: var(--text-primary);">
                    <i class="fas fa-info-circle" style="color: var(--info);"></i>
                    테스트 계정
                </h4>
                <div style="font-size: 0.8125rem; color: var(--text-secondary); line-height: 1.4;">
                    <div style="margin-bottom: 4px;">
                        <strong>관리자:</strong> admin@bluerobot.co.kr / admin123!
                    </div>
                    <div style="margin-bottom: 4px;">
                        <strong>마케팅:</strong> marketing@bluerobot.co.kr / marketing123!
                    </div>
                    <div>
                        <strong>영업:</strong> sales@bluerobot.co.kr / sales123!
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 비밀번호 찾기 모달 -->
    <div id="forgotPasswordModal" class="modal-overlay">
        <div class="modal" style="max-width: 400px;">
            <div class="modal-header">
                <h3 class="modal-title">비밀번호 재설정</h3>
                <button type="button" class="modal-close" onclick="closeForgotPasswordModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: var(--spacing-sm); color: var(--text-secondary);">
                    등록된 이메일 주소로 비밀번호 재설정 링크를 보내드립니다.
                </p>
                <div class="form-group">
                    <label for="resetEmail" class="form-label">이메일 주소</label>
                    <input 
                        type="email" 
                        id="resetEmail" 
                        class="form-input" 
                        placeholder="example@bluerobot.co.kr"
                        required
                    >
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeForgotPasswordModal()">
                    취소
                </button>
                <button type="button" class="btn btn-primary" onclick="sendPasswordReset()">
                    <i class="fas fa-paper-plane"></i>
                    재설정 링크 발송
                </button>
            </div>
        </div>
    </div>
    
    <!-- 토스트 알림 컨테이너 -->
    <div id="toastContainer" class="toast-container">
        <!-- 토스트 메시지들이 여기에 동적으로 추가됩니다 -->
    </div>
    
    <!-- JavaScript Files -->
    <script src="js/main.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/components.js"></script>
    
    <!-- 페이지별 스크립트 -->
    <script>
        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', function() {
            // 토스트 컨테이너 강제 초기화
            if (!document.getElementById('toastContainer')) {
                const container = document.createElement('div');
                container.id = 'toastContainer';
                container.className = 'toast-container';
                document.body.appendChild(container);
            }
        });
        
        // 테스트 계정 자동 입력 함수
        function fillTestAccount(type) {
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            
            const accounts = {
                admin: { email: 'admin@bluerobot.co.kr', password: 'admin123!' },
                marketing: { email: 'marketing@bluerobot.co.kr', password: 'marketing123!' },
                sales: { email: 'sales@bluerobot.co.kr', password: 'sales123!' }
            };
            
            if (accounts[type]) {
                emailInput.value = accounts[type].email;
                passwordInput.value = accounts[type].password;
                passwordInput.focus();
            }
        }
        
        // 비밀번호 찾기 모달 관련 함수
        function showForgotPasswordModal() {
            const modal = document.getElementById('forgotPasswordModal');
            if (modal) {
                modal.classList.add('open');
                document.getElementById('resetEmail').focus();
            }
        }
        
        function closeForgotPasswordModal() {
            const modal = document.getElementById('forgotPasswordModal');
            if (modal) {
                modal.classList.remove('open');
                document.getElementById('resetEmail').value = '';
            }
        }
        
        // 비밀번호 재설정 이메일 발송
        function sendPasswordReset() {
            const emailInput = document.getElementById('resetEmail');
            const email = emailInput.value.trim();
            
            if (!email) {
                safeShowToast('이메일 주소를 입력해주세요.', 'error');
                return;
            }
            
            if (!isValidEmail(email)) {
                safeShowToast('올바른 이메일 주소를 입력해주세요.', 'error');
                return;
            }
            
            // 실제 구현에서는 서버에 요청
            safeShowToast('비밀번호 재설정 링크가 이메일로 발송되었습니다.', 'success');
            closeForgotPasswordModal();
        }
        
        // 이메일 유효성 검사 함수
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        // 안전한 토스트 함수
        function safeShowToast(message, type = 'info') {
            if (typeof showToast === 'function') {
                showToast(message, type);
            } else {
                console.log(`[${type.toUpperCase()}] ${message}`);
            }
        }
        
        // 필드 오류 표시 함수들
        function showFieldError(fieldId, message) {
            const field = document.getElementById(fieldId);
            if (field) {
                field.classList.add('error');
                
                let errorElement = field.parentElement.querySelector('.form-error');
                if (!errorElement) {
                    errorElement = document.createElement('div');
                    errorElement.className = 'form-error';
                    field.parentElement.appendChild(errorElement);
                }
                errorElement.textContent = message;
            }
        }
        
        function clearFieldError(fieldId) {
            const field = document.getElementById(fieldId);
            if (field) {
                field.classList.remove('error');
                const errorElement = field.parentElement.querySelector('.form-error');
                if (errorElement) {
                    errorElement.remove();
                }
            }
        }
        
        // 테스트 계정 클릭 이벤트 추가
        document.addEventListener('DOMContentLoaded', function() {
            // 테스트 계정 정보에 클릭 이벤트 추가
            const testAccounts = document.querySelector('.test-accounts');
            if (testAccounts) {
                testAccounts.addEventListener('click', function(e) {
                    const text = e.target.textContent;
                    if (text.includes('admin@bluerobot.co.kr')) {
                        fillTestAccount('admin');
                    } else if (text.includes('marketing@bluerobot.co.kr')) {
                        fillTestAccount('marketing');
                    } else if (text.includes('sales@bluerobot.co.kr')) {
                        fillTestAccount('sales');
                    }
                });
                
                // 커서 포인터로 변경
                testAccounts.style.cursor = 'pointer';
            }
            
            // 엔터키로 모달 닫기
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeForgotPasswordModal();
                }
            });
        });
        
        // 폼 자동완성 개선
        document.addEventListener('DOMContentLoaded', function() {
            const emailInput = document.getElementById('email');
            
            // 이메일 입력 시 실시간 유효성 검사
            emailInput.addEventListener('blur', function() {
                const email = this.value.trim();
                if (email && !isValidEmail(email)) {
                    showFieldError('email', '올바른 이메일 형식이 아닙니다.');
                } else {
                    clearFieldError('email');
                }
            });
        });
    </script>
</body>
</html>